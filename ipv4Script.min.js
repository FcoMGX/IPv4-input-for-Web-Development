document.addEventListener("DOMContentLoaded",(()=>{const e=()=>document.documentElement.lang?document.documentElement.lang.slice(0,2).toLowerCase():navigator.languages&&navigator.languages.length>0?navigator.languages[0].slice(0,2).toLowerCase():navigator.language?navigator.language.slice(0,2).toLowerCase():"en",t=()=>{const t={es:"Octeto no válido.",en:"Invalid octet.",fr:"Octet invalide.",it:"Ottetto non valido.",pt:"Octeto inválido.",de:"Ungültiges Oktett.",zh:"无效的八位字节。",ja:"無効なオクテットです。"};return t[e()]||t.en},n=()=>{const t={es:"Complete este campo.",en:"Please fill out this field.",fr:"Veuillez remplir ce champ.",it:"Compila questo campo.",pt:"Preencha este campo.",de:"Füllen Sie dieses Feld aus.",zh:"请填写此字段。",ja:"このフィールドに入力してください。"};return t[e()]||t.en},i=e=>{const t=e.trim(),n=parseInt(t,10);return""!==t&&!isNaN(n)&&n>=0&&n<=255},o=e=>e?"00"===e||"000"===e?"0":e.length>1&&e.startsWith("0")?e.replace(/^0+/,""):e:"",a=(e,t,n)=>{if(e.style[t])return;const i=window.getComputedStyle(e)[t],o=((e,t)=>{const n=document.createElement(e.tagName);"input"===e.tagName.toLowerCase()&&e.getAttribute("type")&&n.setAttribute("type",e.getAttribute("type")),document.body.appendChild(n);const i=window.getComputedStyle(n)[t];return document.body.removeChild(n),i})(e,t);i===o&&(e.style[t]=n)},r=e=>{Object.keys(c).forEach((t=>{if(e.matches(t)){const n=c[t];Object.entries(n).forEach((([t,n])=>{a(e,t,n)}))}}))},l=e=>{e.nodeType===Node.ELEMENT_NODE&&(r(e),e.querySelectorAll("*").forEach((e=>r(e))))},s=t=>{const n=document.createElement("div");n.classList.add("ipv4-container"),t.id&&(n.id=t.id),t.className&&t.className.split(" ").forEach((e=>n.classList.add(e)));const a=document.createElement("input");a.type="hidden",t.name&&(a.name=t.name),t.id&&(a.id=`${t.id}-hidden`),a.classList.add("ipv4-hidden-input");let r=null;if(t.id){r=`${t.id}_octet_1`;const e=document.querySelector(`label[for="${t.id}"]`);e&&e.setAttribute("for",r)}const l=()=>{const e=n.querySelectorAll(".ipv4-input"),t=[];let a=!0;return e.forEach((e=>{const n=o(e.value.trim());i(n)||(a=!1),t.push(n)})),4===t.length&&a?t.join("."):""},s=()=>{a.setAttribute("value",l())},c=(e,t=0)=>{const i=n.querySelectorAll(".ipv4-input"),o=e.replace(/[^0-9.]/g,"").split(".");if(o.length<=1&&!e.includes("."))return!1;let a=t;o.forEach((e=>{if(a<i.length){let t="",n=!1;if(""!==e){const i=parseInt(e,10);!isNaN(i)&&i>=0&&i<=255?t=i.toString():(t="",n=!0)}const o=i[a];o.value=t,o.setCustomValidity(""),n?o.classList.add("error"):o.classList.remove("error"),a++}})),s();const r=Math.min(a,3);return i[r]&&i[r].focus(),!0},d=t=>{const o=n.querySelectorAll(".ipv4-input");if(""===(t="string"==typeof t?t:""))return o.forEach((e=>{e.value="",e.classList.remove("error"),e.setCustomValidity("")})),void s();const a=t.split(".");let r=4===a.length;if(r&&(r=a.every((e=>i(e)))),!r)return console.warn((t=>{const n={es:`El valor especificado '${t}' no es una dirección IPv4 válida.`,en:`The specified value '${t}' is not a valid IPv4 address.`,fr:`La valeur spécifiée '${t}' n'est pas une adresse IPv4 valide.`,it:`Il valore specificato '${t}' non è un indirizzo IPv4 valido.`,pt:`O valor especificado '${t}' não é um endereço IPv4 válido.`,de:`Der angegebene Wert '${t}' ist keine gültige IPv4-Adresse.`,zh:`指定的值 '${t}' 不是有效的 IPv4 地址。`,ja:`指定された値 '${t}' は有効なIPv4アドレスではありません。`};return n[e()]||n.en})(t)),o.forEach((e=>{e.value="",e.classList.remove("error"),e.setCustomValidity("")})),void s();c(t)};Object.defineProperty(n,"value",{get:()=>l(),set:e=>d(e)}),Object.defineProperty(a,"value",{get:()=>n.value,set:e=>{n.value=e,s()}});const u=t.hasAttribute("required");for(let e=0;e<4;e++){const t=document.createElement("input");if(t.type="text",t.classList.add("ipv4-input"),t.maxLength=3,0===e&&r&&(t.id=r),u&&(t.required=!0),t.addEventListener("input",(i=>{if(t.setCustomValidity(""),t.value.includes(".")||t.value.length>3){if(c(t.value,e))return void i.preventDefault()}let o=t.value.replace(/\D/g,"");const a=parseInt(o,10);if(""!==o&&a>255?t.classList.add("error"):t.classList.remove("error"),t.value=o,3===o.length&&a<=255){const t=n.querySelectorAll(".ipv4-input");t[e+1]&&t[e+1].focus()}s()})),t.addEventListener("keydown",(i=>{if(!(i.ctrlKey||i.metaKey||i.altKey)&&1===i.key.length&&/\D/.test(i.key)&&"."!==i.key&&i.preventDefault(),"Backspace"===i.key&&""===t.value&&e>0){const t=n.querySelectorAll(".ipv4-input");t[e-1]&&t[e-1].focus()}if("."===i.key){if(t.value.length>0&&parseInt(t.value,10)<=255){const t=n.querySelectorAll(".ipv4-input");t[e+1]&&t[e+1].focus()}i.preventDefault()}})),t.addEventListener("blur",(()=>{t.value=o(t.value),s()})),t.addEventListener("paste",(t=>{t.preventDefault();const n=t.clipboardData?t.clipboardData.getData("text"):window.clipboardData.getData("text");c(n,e)})),n.appendChild(t),e<3){const e=document.createElement("span");e.textContent=".",n.appendChild(e)}}t.value&&d(t.value),t.insertAdjacentElement("afterend",a),t.replaceWith(n),s()},c={".ipv4-input":{width:"35px",textAlign:"center"},".ipv4-container":{display:"inline-flex",alignItems:"center",width:"fit-content",verticalAlign:"middle"},".ipv4-container span":{margin:"0 5px"}};l(document.body);new MutationObserver((e=>{e.forEach((e=>{"childList"===e.type?e.addedNodes.forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&l(e)})):"attributes"===e.type&&"style"===e.attributeName&&e.target.nodeType===Node.ELEMENT_NODE&&r(e.target)}))})).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}),document.querySelectorAll('input[type="ipv4"]').forEach((e=>s(e)));new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{if(e.nodeType===Node.ELEMENT_NODE){"INPUT"===e.tagName&&"ipv4"===e.getAttribute("type")&&s(e);const t=e.querySelectorAll?.('input[type="ipv4"]');t&&t.length>0&&t.forEach((e=>s(e)))}}))}))})).observe(document.body,{childList:!0,subtree:!0}),document.addEventListener("submit",(e=>{const a=e.target.querySelectorAll(".ipv4-container");let r=!1;for(const l of a){if(r)break;const a=l.querySelectorAll(".ipv4-input"),s=[...a].map((e=>o(e.value.trim()))),c=!s.every((e=>""===e))&&s.some((e=>""===e));for(let o=0;o<4;o++){const l=a[o],d=s[o];if(c&&""===d){l.setCustomValidity(n()),l.reportValidity(),e.preventDefault(),r=!0;break}if(""!==d&&!i(d)){l.setCustomValidity(t()),l.reportValidity(),e.preventDefault(),r=!0;break}}}})),document.addEventListener("reset",(e=>{"FORM"===e.target.tagName&&setTimeout((()=>{e.target.querySelectorAll(".ipv4-input").forEach((e=>{e.classList.remove("error"),e.setCustomValidity("")})),e.target.querySelectorAll(".ipv4-container").forEach((e=>{const t=e.nextElementSibling;e.value=t.value}))}),0)}));(()=>{let e=!1;const t=document.createElement("input");t.className="ipv4-input error",t.style.display="none",document.body.appendChild(t);const n=document.createElement("input");document.body.appendChild(n);try{const i=getComputedStyle(t),o=getComputedStyle(n);e=i.backgroundColor!==o.backgroundColor}catch(e){console.error("Error checking styles:",e.stack)}finally{document.body.removeChild(t),document.body.removeChild(n)}if(!e){const e=document.createElement("style");e.textContent=".ipv4-input.error {\n        background-color: #ffcccc !important;\n      }",document.head.appendChild(e)}})()}));